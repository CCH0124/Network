# Data Scraping
攻擊者可以使用網頁抓取工具以比預期更快的速度訪問存取數據，這可能導致數據被用於未經授權的目的。
## What is data scraping ?
Data scraping（數據抓取）以其最一般的形式指的是計算機程序從另一程序生成的輸出中提取數據的技術。Data scraping 通常表現在網頁抓取中，就是使用應用程序從網站提取有價值訊息的過程。

![](https://www.cloudflare.com/img/learning/security/threats/data-scraping/data-scraping.svg)

## Why scrape website data ?
通常，公司不希望將其獨特內容下載並重新用於未經授權的目的。因此，它們不會透過 API 或其他易於訪問的資源公開所有數據。另一方面，scrape 無論是否限制訪問，都對獲取網站數據感興趣。結果，在網頁抓取和各種內容保護策略之間存在貓捉老鼠遊戲，每個都試圖戰勝對方。

網頁抓取的過程相當簡單，但實施可能很複雜。Web 抓取分三步進行：
1. 首先，用於提取訊息的代碼（我們稱之為 scraper）將 HTTP GET 請求發送到特定網站。
2. 當網站響應時，scraper 解析 HTML document 以獲取特定的數據模式。
3. 提取數據後，它將轉換為爬蟲（scraper）作者設計的任何特定格式。
Scrapers 可以設計用於多種用途，例如：
1. Content scraping
內容可以從網站上提取到網站，以便複製依賴於內容的特定產品或服務的獨特優勢。例如，像 Yelp 這樣的產品依賴於評論，競爭對手可以從 Yelp 中刪除所有評論內容，並在自己的網站上複製內容，假裝內容是原創的。
2. Price scraping 
透過爬取定價數據，競爭對手能夠匯總有關競爭的訊息。這可以使他們形成獨特的優勢。
3. Contact scraping 
許多網站都包含明文的電子郵件地址和電話號碼。通過爬取在線員工目錄等位置，爬蟲可以聚合批量郵件列表，機器人調用或惡意社交工程嘗試的聯繫詳細信息。這是垃圾郵件製造者和詐騙者用來尋找新目標的主要方法之一。

## How is web scraping mitigated ?
現實是沒有辦法阻止網頁爬蟲，有足夠的時間，一個足智多謀的網頁爬蟲可以逐頁提取整個面向公眾的網站。這是因為必須下載 Web 瀏覽器中可見的任何訊息才能進行渲染。換句話說，訪問者能夠看到的所有內容必須被轉移到訪問者的機器上，並且可以抓取訪問者能夠訪問的任何訊息。

可以努力限制可能發生的網頁爬蟲數量。限制數據抓取工作的主要方法有 3 種：
1. Rate limit requests
對於訪問網站上的一系列網頁的人類訪問者來說，與網站的互動速度是可以預測的。例如，你永遠不會讓人類瀏覽 100 個網頁。另一方面，計算機可以比人類更快地發出數量級的請求，而新手數據抓取工具可能會使用無節制的抓取技術來嘗試非常快速地抓取整個網站。透過速率限制特定 IP 地址在給定時間窗口內能夠進行的最大請求數，網站能夠保護自己免受剝削請求的限制，並限制在某個窗口內可能發生的數據抓取量。
2. Modify HTML markup at regular intervals
往頁爬蟲軟體依賴於一致的格式，以便有效地遍歷網站內容並解析和保存有用的數據。中斷此工作流程的一種方法是定期更改 HTML 標記的元素，以使一致的抓取變得更加複雜。通過嵌套 HTML 元素或更改標記的其他方面，簡單的數據抓取工作將受到阻礙。對於某些網站，每次呈現網頁時，某些形式的內容保護修改都會隨機化並實施，而其他網站會偶爾更改其網站以防止長期數據抓取工作。
3. Use CAPTCHAs for high-volume requesters
除了使用速率限制解決方案之外，減慢內容管理器的另一個有用步驟是要求網站訪問者應對計算機難以克服的挑戰。雖然人類可以合理地應對這一挑戰，但是[模擬瀏覽器](https://en.wikipedia.org/wiki/Headless_browser)從事數據抓取的可能性很大，而且肯定不會在許多挑戰實例中保持一致。可以實現其他基於 javascript 的挑戰來測試瀏覽器的功能。

另一種不太常見的緩解方法是將內容嵌入媒體對象（如圖像）中。由於內容不存在於字符串中，因此復制內容要復雜得多，需要光學字符識別（OCR）從圖像文件中提取數據。這也可能妨礙需要從網站上複製諸如地址或電話號碼等內容的網路用戶，而不是記住或重新輸入。

模擬瀏覽器是一種類似於 Chrome 或 Firefox 的網絡瀏覽器，但默認情況下它沒有可視用戶界面，使其移動速度比典型的網絡瀏覽器快得多。通過基本上在命令行級別運行，模擬瀏覽器能夠避免呈現整個 Web 應用程序。數據抓取器編寫腳本以使用模擬瀏覽器更快地請求數據，因為沒有人在查看每個被抓取的頁面。

## How is web scraping stopped completely ?
阻止網頁抓取內容的唯一方法是避免將內容完全放在網站上。更現實的方法包括隱藏用戶身份驗證背後的重要內容，更容易跟蹤用戶並突出惡意行為。

## What is the difference between data scraping and data crawling ?
crawling　本質上是指 Google 等大型搜索引擎在將其機器人抓取工具（例如 Googlebot）發送到網路中以對互聯網內容編制索引時所採取的流程。另一方面，Scraping　通常是專門用於從特定網站提取數據的結構。

以下是 scraper 將參與的 3 種與網頁爬蟲行為不同的做法：

1. Scrapers 將偽裝成 Web 瀏覽器，爬蟲將指示其目的，而不是試圖誘騙網站認為它不是。
2. 有時候，scrapers 會採取高級操作，例如：填寫表格，或以其他方式參與行為以達到網站的某個部分。Crawlers 不會。
3. Scrapers 通常不考慮 robots.txt 文件，該文件是一個文本文件，其中包含專門用於告知 Web 爬網程序要解析哪些數據以及要避免的站點區域的信息。由於 Scrapers 設計用於提取特定內容，因此可以將其設計為提取明確標記為忽略的內容。